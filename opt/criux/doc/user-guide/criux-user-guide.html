<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>criux User Guide</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
<h1>criux User Guide</h1>
<span id="author">Gratien Dhaese</span><br />
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>This document describes everything there is to know regarding
<strong>criux</strong>, an Open Source framework designed to assist the UNIX system engineer in investigating clustered
systems</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>criux</strong> is a software framework to investigate Unix clustered systems (Linux,
HP-UX, AIX and Solaris).</p></div>
<div class="paragraph"><p>In professional environments it is not allowed
to just blindly update an UNIX system without testing this first out on a development
system, pre-production and so on. The criux product allows you to repeat
this process in a consistent way and as many times as you like on any system.
Upgrade-ux understands two states:</p></div>
<div class="paragraph"><p>The criux uses configuration files which describes what a particular Unix Operating
System requires to be upgraded in the way you want it (or designed it).</p></div>
<div class="paragraph"><p>Furthermore, many checks can be build-in via adding simple scripts (see chapter
"Adding your scripts"). We also keep of each run an unique log file, and furthermore, we
keep all reports (text and HTML) with a timestamp.</p></div>
<div class="sect2">
<h3 id="_criux_project">1.1. criux project</h3>
<div class="paragraph"><p>The support and development of the criux project takes place
on Github:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
criux website
</dt>
<dd>
<p>
    <a href="http://www.it3.be/projects/criux.html">http://www.it3.be/projects/criux.html</a>
</p>
</dd>
<dt class="hdlist1">
Github project
</dt>
<dd>
<p>
    <a href="http://github.com/gdha/criux/">http://github.com/gdha/criux/</a>
</p>
</dd>
</dl></div>
<div class="paragraph"><p>In case you have questions, ideas or feedback about this document, you
can contact the development team at:
<a href="mailto:gratien.dhaese@gmail.com">gratien.dhaese@gmail.com</a>.</p></div>
</div>
<div class="sect2">
<h3 id="_design_concepts">1.2. Design concepts</h3>
<div class="paragraph"><p>Based on experience from previous projects, a set of design principles were
defined, and improved over time:</p></div>
<div class="ulist"><ul>
<li>
<p>
Focus on easy and repeatable tasks
</p>
</li>
<li>
<p>
Modular design, focused on system administrators
</p>
</li>
<li>
<p>
For Unix operating systems
</p>
</li>
<li>
<p>
Few external dependencies (ksh and standard Unix tools)
</p>
</li>
<li>
<p>
Easy to use and easy to extend
</p>
</li>
</ul></div>
<div class="paragraph"><p>The goal is to make criux as least demanding as possible, it will
require only the applications necessary to fulfill the job criux
is configured for.</p></div>
</div>
<div class="sect2">
<h3 id="_features_and_functionality">1.3. Features and functionality</h3>
<div class="paragraph"><p>criux has a wide range of features:</p></div>
<div class="ulist"><ul>
<li>
<p>
Simple to use
</p>
</li>
<li>
<p>
Is customisable via <code>local.conf</code> configuration file
</p>
</li>
<li>
<p>
Is written in standard Korn Shell (which makes it highly portable)
</p>
</li>
<li>
<p>
Is UNIX Operating System independent as OS specific tasks reside in their own directory structures
</p>
</li>
<li>
<p>
Is easy extendable with your own scripts
</p>
</li>
<li>
<p>
The <code>criux</code> command leaves a trace in its own log file
</p>
</li>
<li>
<p>
Has a man page
</p>
</li>
<li>
<p>
Has user documentation (you are reading it)
</p>
</li>
<li>
<p>
Does understand Serviceguard clusters (HP-UX and Linux)
</p>
</li>
<li>
<p>
Can trigger remote alarms, syslog, monitors,&#8230;
</p>
</li>
<li>
<p>
Can do a basis health check of your system - it is all up to you
</p>
</li>
<li>
<p>
Has excellent support by its author
</p>
</li>
<li>
<p>
Author is willing to write new workflows (or scripts) for a moderate day rate
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started">2. Getting started</h2>
<div class="sectionbody">
<div class="paragraph"><p>You can use criux via installing the sources or the software depot (HP-UX, Linux,&#8230;)</p></div>
<div class="sect2">
<h3 id="_clone_the_sources_via_github">2.1. Clone the sources via GitHub</h3>
<div class="paragraph"><p>The latest sources are available at <a href="https://github.com/gdha/criux">GitHub</a> and to clone
the sources on your local Unix you could use</p></div>
<div class="literalblock">
<div class="content">
<pre><code>git clone git@github.com:gdha/criux.git</code></pre>
</div></div>
<div class="paragraph"><p>To enter the directory use the command</p></div>
<div class="literalblock">
<div class="content">
<pre><code>cd criux/opt/criux</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_installing_the_software_depot_on_hp_ux">2.2. Installing the software depot on HP-UX</h3>
<div class="paragraph"><p>If the software depot was already been made available by the system administrator then you can use <code>swinstall</code> to do the job.
The following is the output of the command <code>swinstall -s SDserver:/var/opt/ignite/depots/GLOBAL/tools/11i CRIUX</code></p></div>
</div>
<div class="sect2">
<h3 id="_installing_the_rpm_package_on_linux_rhel_sles">2.3. Installing the RPM package on Linux (RHEL, SLES)</h3>
<div class="paragraph"><p>When the RPM is available you could install it via the command:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>rpm -ivh criux-1.0-1.el7.noarch.rpm</code></pre>
</div></div>
<div class="paragraph"><p>Or, in case you would liek to upgrade a version via <code>yum</code> you could do the following:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>rpm -Uvh criux-1.1-1.el7.noarch.rpm</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_prerequisites">2.4. Prerequisites</h3>
<div class="paragraph"><p>Be aware, that criux is completely written in Korn Shell, therefore, you must have the <code>ksh</code> executable on your UNIX system. To be sure you could type <code>which ksh</code>. If it is not present please install it first (most likely on Linux where it is not a standard package in base OS).</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">3. Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_criux_related_configuration_files">3.1. criux related configuration files</h3>
<div class="paragraph"><p>The configuration files that <code>criux</code> uses are basically just shell scripts and should be treated as such.</p></div>
<div class="paragraph"><p>The default location of the configuration files is <code>/etc/opt/criux/</code>. However, if you are working with the sources (e.g. via git clone) then it is perfectly possible to use the relative paths, e.g.</p></div>
<div class="literalblock">
<div class="content">
<pre><code>ls $HOME/project/criux/etc/opt/criux/</code></pre>
</div></div>
<div class="paragraph"><p>The easiest way to explain which configuration files are possible is by showing the output of the <code>criux dump</code> command:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="font-style: italic"><span style="color: #9A1900">#-&gt; bin/criux dump</span></span>
    criux <span style="color: #993399">1.0</span> <span style="color: #990000">/</span> Git
    Using log file<span style="color: #990000">:</span> /home/gdhaese<span style="color: #993399">1</span>/projects/criux/var/opt/criux/log/criux-<span style="color: #993399">20150304</span>-<span style="color: #993399">1015</span>-LOGFILE<span style="color: #990000">.</span>log
    Dumping out configuration and system information
    System definition<span style="color: #990000">:</span>
                                       ARCH <span style="color: #990000">=</span> HP-UX-ia<span style="color: #993399">64</span>
                                         OS <span style="color: #990000">=</span> HP-UX
                           OS_MASTER_VENDOR <span style="color: #990000">=</span>
                          OS_MASTER_VERSION <span style="color: #990000">=</span>
                      OS_MASTER_VENDOR_ARCH <span style="color: #990000">=</span>
                   OS_MASTER_VENDOR_VERSION <span style="color: #990000">=</span>
              OS_MASTER_VENDOR_VERSION_ARCH <span style="color: #990000">=</span>
                                  OS_VENDOR <span style="color: #990000">=</span> hp
                                 OS_VERSION <span style="color: #990000">=</span> <span style="color: #993399">11.31</span>
                             OS_VENDOR_ARCH <span style="color: #990000">=</span> hp/ia<span style="color: #993399">64</span>
                          OS_VENDOR_VERSION <span style="color: #990000">=</span> hp<span style="color: #990000">/</span><span style="color: #993399">11.31</span>
                     OS_VENDOR_VERSION_ARCH <span style="color: #990000">=</span> hp<span style="color: #990000">/</span><span style="color: #993399">11.31</span>/ia<span style="color: #993399">64</span>
    Configuration tree<span style="color: #990000">:</span>
                            HP-UX-ia<span style="color: #993399">64</span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                                 HP-UX<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> OK
                                    hp<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                               hp/ia<span style="color: #993399">64</span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                              hp<span style="color: #990000">/</span><span style="color: #993399">11.31</span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                         hp<span style="color: #990000">/</span><span style="color: #993399">11.31</span>/ia<span style="color: #993399">64</span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                                  site<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                                 <span style="font-weight: bold"><span style="color: #0000FF">local</span></span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> OK</tt></pre></div></div>
<div class="sect3">
<h4 id="_default_configuration_file_default_conf">3.1.1. Default configuration file default.conf</h4>
<div class="paragraph"><p>The <code>default.conf</code> contains lots of variables which should not be changed by the end-user. If you wish to modify one just redefine it in the <code>local.conf</code> file.</p></div>
</div>
<div class="sect3">
<h4 id="_local_configuration_file_local_conf">3.1.2. Local configuration file local.conf</h4>
<div class="paragraph"><p>The <code>local.conf</code> should only contain variables which you want to overrule, as described in previous section (of the <code>default.conf</code> file). It is important to know that the <code>local.conf</code> file is the last configuration file read by <code>criux</code> script and therefore, the variables defined in there are the last ones that will be used.</p></div>
</div>
<div class="sect3">
<h4 id="_operating_specific_configuration_files">3.1.3. Operating Specific configuration files</h4>
<div class="paragraph"><p>On each OS you have specific OS related configuration files, e.g.</p></div>
<div class="literalblock">
<div class="content">
<pre><code>HP-UX.conf
GNU/Linux.conf
SunOS.conf</code></pre>
</div></div>
<div class="paragraph"><p>These configuration files typically contain variables which have only a meaning within that specific OS, e.g. on HP-UX</p></div>
<div class="literalblock">
<div class="content">
<pre><code>SWINSTALL=/usr/sbin/swinstall</code></pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_workflows">4. Workflows</h2>
<div class="sectionbody">
<div class="paragraph"><p>The workflows (or commands) available can be listed with the <code>-h</code> option or <code>help</code> command:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># /opt/criux/bin/criux -h</span></span>
    <span style="color: #990000">....</span>
    List of commands<span style="color: #990000">:</span>
     cluster         check the cluster configuration
     dump            dump configuration and system information
     mkdist          create a compressed tar archive distribution
     purgelogs       purge the LOG <span style="color: #990000">[</span>/var/opt/criux/log<span style="color: #990000">]</span> directory
     <span style="font-weight: bold"><span style="color: #0000FF">test</span></span>            a simple <span style="font-weight: bold"><span style="color: #0000FF">test</span></span> workflow
</tt></pre></div></div>
<div class="sect2">
<h3 id="_dump_workflow">4.1. Dump workflow</h3>
<div class="paragraph"><p>The dump workflow was already discussed during the configuration chapter. The output of <code>/opt/criux/bin/criux dump</code>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># /opt/criux/bin/criux dump</span></span>
criux <span style="color: #993399">1.0</span> <span style="color: #990000">/</span> <span style="color: #993399">03</span>-Mar-<span style="color: #993399">2015</span>
Using log file<span style="color: #990000">:</span> /var/opt/criux/log/criux-<span style="color: #993399">20150226</span>-<span style="color: #993399">1656</span>-LOGFILE<span style="color: #990000">.</span>log
Dumping out configuration and system information
System definition<span style="color: #990000">:</span>
                                    ARCH <span style="color: #990000">=</span> HP-UX-ia<span style="color: #993399">64</span>
                                      OS <span style="color: #990000">=</span> HP-UX
                        OS_MASTER_VENDOR <span style="color: #990000">=</span>
                       OS_MASTER_VERSION <span style="color: #990000">=</span>
                   OS_MASTER_VENDOR_ARCH <span style="color: #990000">=</span>
                OS_MASTER_VENDOR_VERSION <span style="color: #990000">=</span>
           OS_MASTER_VENDOR_VERSION_ARCH <span style="color: #990000">=</span>
                               OS_VENDOR <span style="color: #990000">=</span> hp
                              OS_VERSION <span style="color: #990000">=</span> <span style="color: #993399">11.31</span>
                          OS_VENDOR_ARCH <span style="color: #990000">=</span> hp/ia<span style="color: #993399">64</span>
                       OS_VENDOR_VERSION <span style="color: #990000">=</span> hp<span style="color: #990000">/</span><span style="color: #993399">11.31</span>
                  OS_VENDOR_VERSION_ARCH <span style="color: #990000">=</span> hp<span style="color: #990000">/</span><span style="color: #993399">11.31</span>/ia<span style="color: #993399">64</span>
Configuration tree<span style="color: #990000">:</span>
                         HP-UX-ia<span style="color: #993399">64</span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                              HP-UX<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> OK
                                 hp<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                            hp/ia<span style="color: #993399">64</span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                           hp<span style="color: #990000">/</span><span style="color: #993399">11.31</span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                      hp<span style="color: #990000">/</span><span style="color: #993399">11.31</span>/ia<span style="color: #993399">64</span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                               site<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                              <span style="font-weight: bold"><span style="color: #0000FF">local</span></span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> OK</tt></pre></div></div>
<div class="paragraph"><p>The first part displays the system definitions, such as OS, hardware type and OS version.
The second part shows the configuration part and which files it could find (or you may define, create and/or use). They do not need to exist.</p></div>
<div class="paragraph"><p>The following example shows the dump on a RHEL 7 system:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># /opt/criux/bin/criux dump</span></span>
criux <span style="color: #993399">1.0</span> <span style="color: #990000">/</span> Git
Using log file<span style="color: #990000">:</span> /var/opt/criux/log/criux-<span style="color: #993399">20150226</span>-<span style="color: #993399">1859</span>-LOGFILE<span style="color: #990000">.</span>log
Dumping out configuration and system information
This is a <span style="color: #FF0000">'Linux-x86_64'</span> system<span style="color: #990000">,</span> compatible with <span style="color: #FF0000">'Linux-i386'</span><span style="color: #990000">.</span>
System definition<span style="color: #990000">:</span>
                                    ARCH <span style="color: #990000">=</span> Linux-i<span style="color: #993399">386</span>
                                      OS <span style="color: #990000">=</span> GNU/Linux
                        OS_MASTER_VENDOR <span style="color: #990000">=</span> fedora
                       OS_MASTER_VERSION <span style="color: #990000">=</span> <span style="color: #993399">7</span>
                   OS_MASTER_VENDOR_ARCH <span style="color: #990000">=</span> fedora/x86_64
                OS_MASTER_VENDOR_VERSION <span style="color: #990000">=</span> fedora<span style="color: #990000">/</span><span style="color: #993399">7</span>
           OS_MASTER_VENDOR_VERSION_ARCH <span style="color: #990000">=</span> fedora<span style="color: #990000">/</span><span style="color: #993399">7</span>/x86_64
                               OS_VENDOR <span style="color: #990000">=</span> rhel
                              OS_VERSION <span style="color: #990000">=</span> <span style="color: #993399">7</span>
                          OS_VENDOR_ARCH <span style="color: #990000">=</span> rhel/x86_64
                       OS_VENDOR_VERSION <span style="color: #990000">=</span> rhel<span style="color: #990000">/</span><span style="color: #993399">7</span>
                  OS_VENDOR_VERSION_ARCH <span style="color: #990000">=</span> rhel<span style="color: #990000">/</span><span style="color: #993399">7</span>/x86_64
Configuration tree<span style="color: #990000">:</span>
                         Linux-i<span style="color: #993399">386</span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                          GNU/Linux<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> OK
                             fedora<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                      fedora/x86_64<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                           fedora<span style="color: #990000">/</span><span style="color: #993399">7</span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                    fedora<span style="color: #990000">/</span><span style="color: #993399">7</span>/x86_64<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                               rhel<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                        rhel/x86_64<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                             rhel<span style="color: #990000">/</span><span style="color: #993399">7</span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                      rhel<span style="color: #990000">/</span><span style="color: #993399">7</span>/x86_64<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                               site<span style="color: #990000">.</span>conf <span style="color: #990000">:</span> missing/empty
                              <span style="font-weight: bold"><span style="color: #0000FF">local</span></span><span style="color: #990000">.</span>conf <span style="color: #990000">:</span> OK</tt></pre></div></div>
<div class="paragraph"><p>These configuration files live under the <code>/etc/opt/criux</code> or <code>./criux/etc/opt/criux</code> (relative path) directory.
At this moment we have the following configuration files present (however, it will grow over time):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="font-style: italic"><span style="color: #9A1900"># ls -lR</span></span>
    total <span style="color: #993399">112</span>
    drwxr-xr-x   <span style="color: #993399">2</span> gdhaese1   users         <span style="color: #993399">8192</span> Mar  <span style="color: #993399">6</span> <span style="color: #993399">13</span><span style="color: #990000">:</span><span style="color: #993399">39</span> GNU
    -rw-r--r--   <span style="color: #993399">1</span> gdhaese1   users         <span style="color: #993399">1068</span> May <span style="color: #993399">12</span> <span style="color: #993399">10</span><span style="color: #990000">:</span><span style="color: #993399">52</span> HP-UX<span style="color: #990000">.</span>conf
    -rw-r--r--   <span style="color: #993399">1</span> gdhaese1   users         <span style="color: #993399">4571</span> Jun <span style="color: #993399">13</span> <span style="color: #993399">14</span><span style="color: #990000">:</span><span style="color: #993399">58</span> default<span style="color: #990000">.</span>conf
    -rw-r--r--   <span style="color: #993399">1</span> gdhaese1   users          <span style="color: #993399">790</span> May <span style="color: #993399">21</span> <span style="color: #993399">09</span><span style="color: #990000">:</span><span style="color: #993399">48</span> <span style="font-weight: bold"><span style="color: #0000FF">local</span></span><span style="color: #990000">.</span>conf

    <span style="color: #990000">.</span>/GNU<span style="color: #990000">:</span>
    total <span style="color: #993399">48</span>
    -rw-r--r--   <span style="color: #993399">1</span> gdhaese1   users           <span style="color: #993399">74</span> Mar  <span style="color: #993399">6</span> <span style="color: #993399">10</span><span style="color: #990000">:</span><span style="color: #993399">43</span> Linux<span style="color: #990000">.</span>conf</tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_mkdist_workflow">4.2. Mkdist workflow</h3>
<div class="paragraph"><p>The mkdist workflow creates a compressed tar file of the current development tree, which only makes sense when you are using the <code>git clone</code> version of criux. The compressed tar file is stored under <code>/tmp</code> file system and is called <code>/tmp/criux-0.9.tar.gz</code> (the version can be different of course).</p></div>
</div>
<div class="sect2">
<h3 id="_purgelogs_workflow">4.3. Purgelogs workflow</h3>
<div class="paragraph"><p>The purgelogs workflow just has a simple function and that is to purge log files which are older than 30 days. It will display the logs it has purged (only when you are using the option <code>-v</code>):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># opt/criux/bin/criux -v purgelogs</span></span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_test_workflow">4.4. Test workflow</h3>
<div class="paragraph"><p>The test workflow is a very simplistic test (use option <code>-v</code> to see something):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># opt/criux/bin/criux -v test</span></span>
criux <span style="color: #993399">1.0</span> <span style="color: #990000">/</span> Git
Using log file<span style="color: #990000">:</span> /home/gdhaese<span style="color: #993399">1</span>/projects/criux/var/opt/criux/log/criux-<span style="color: #993399">20150225</span>-<span style="color: #993399">1354</span>-LOGFILE<span style="color: #990000">.</span>log
no stale NFS mount points found</tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_cluster_workflow">4.5. Cluster workflow</h3>
<div class="paragraph"><p>The cluster workflow is the real work horse here</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_usage">5. Basic Usage</h2>
<div class="sectionbody">
<div class="paragraph"><p>Before digging deeper in <code>criux</code> lets explain the basic usage. The option help (<code>-h</code>) will produce the following:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># /opt/criux/bin/criux -h</span></span>
Usage<span style="color: #990000">:</span> criux <span style="color: #990000">[</span>-dDFsSpvV<span style="color: #990000">]</span> <span style="color: #990000">[</span>-c DIR <span style="color: #990000">]</span> COMMAND <span style="color: #990000">[</span>-- ARGS<span style="color: #990000">...]</span>

criux comes with ABSOLUTELY NO WARRANTY<span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> details see
the GNU General Public License at<span style="color: #990000">:</span> http<span style="color: #990000">:</span>//www<span style="color: #990000">.</span>gnu<span style="color: #990000">.</span>org/licenses/gpl<span style="color: #990000">.</span>html

Available options<span style="color: #990000">:</span>
 -c DIR       alternative config directory<span style="color: #990000">;</span> instead of /etc/opt/criux
 -d           debug mode<span style="color: #990000">;</span> log debug messages
 -D           debugscript mode<span style="color: #990000">;</span> log every <span style="font-weight: bold"><span style="color: #000000">function call</span></span>
 -F           forcing preview or upgrade to <span style="font-weight: bold"><span style="color: #0000FF">continue</span></span> when entering next stage is not allowed
 -s           simulation mode<span style="color: #990000">;</span> show what scripts criux would include
 -S           step-by-step mode<span style="color: #990000">;</span> acknowledge each script individually
 -p           preview mode<span style="color: #990000">;</span> run all install or other commands <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> preview
 -v           verbose mode<span style="color: #990000">;</span> show more output
 -V           version information

List of commands<span style="color: #990000">:</span>
 cluster         check the cluster configuration
 dump            dump configuration and system information
 mkdist          create a compressed tar archive distribution
 purgelogs       purge the LOG <span style="color: #990000">[</span>/var/opt/criux/log<span style="color: #990000">]</span> directory
 <span style="font-weight: bold"><span style="color: #0000FF">test</span></span>            a simple <span style="font-weight: bold"><span style="color: #0000FF">test</span></span> workflow</tt></pre></div></div>
<div class="paragraph"><p>Keep in mind that criux has an excellent man page too. See <code>man 8 criux</code></p></div>
<div class="paragraph"><p>It is important to know that <code>criux</code> is a quiet program and will not show any output if you do not request for it with the verbose option (<code>-v</code>). Another point of interest is its excellent logging facilities as under <code>/var/opt/criux/log</code> directory <code>criux</code> keep a log file of each run. The log files are composed as follow <code>criux-&lt;YYYYMMDD&gt;-&lt;HHMM&gt;-LOGFILE.log</code></p></div>
<div class="paragraph"><p>We already mentioned the evidence files which are kept under <code>/var/opt/criux/</code> directory.</p></div>
<div class="paragraph"><p>Starting up the program should be done by referencing the full path <code>/opt/criux/bin/criux</code> as the directory is not part of the <code>PATH</code> variable, and we prefer to keep it this way to avoid accidents.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_cluster_operation">6. Cluster Operation</h2>
<div class="sectionbody">
<div class="paragraph"><p>The <strong>cluster</strong> operation (or workflow) is the workflow which investigare the cluster by first determining which kind of cluster you are using, if any of course.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_the_criux_scripts">7. The criux scripts</h2>
<div class="sectionbody">
<div class="paragraph"><p>The scripts that are sourced by the main script <code>criux</code> reside under <code>/opt/criux/scripts/</code> directory and the easiest way to know what will be sourced is by running <code>/opt/criux/bin/criux -s</code>:</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">It depends on the OS architecture (see <code>dump</code> workflow) which scripts will be sources.</td>
</tr></table>
</div>
<div class="paragraph"><p>In every <em>stage</em> directory you will find minumum a <code>default</code> directory which is sourced by every OS and a hardware specific directory, such as:</p></div>
<div class="ulist"><ul>
<li>
<p>
hp
</p>
</li>
<li>
<p>
GNU/Linux
</p>
</li>
<li>
<p>
sunos
</p>
</li>
<li>
<p>
aix
</p>
</li>
</ul></div>
<div class="paragraph"><p>The scripts found under these directories are only sourced when you run <code>criux</code> on those HW architectures (make sense, no?).
If you need new scripts just write a small script called <code>my_script.sh</code> (the <code>.sh</code> is important!) and it will be picked up the next time automatically.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">there is no need to make these small scripts executable (nor is it required to start with <code>#!/bin/sh</code> or whatever).</td>
</tr></table>
</div>
<div class="paragraph"><p>Now it is up to you! If you wish to add new scripts it is always usefull to first make a new issue at GitHub: <a href="https://github.com/gdha/criux/issues">https://github.com/gdha/criux/issues</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_frequently_asked_questions">8. Frequently Asked Questions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_criux_not_found">8.1. Criux not found</h3>
<div class="paragraph"><p>If you get the following error when you try to run <code>criux</code></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># criux</span></span>
sh<span style="color: #990000">:</span> criux<span style="color: #990000">:</span>  not found<span style="color: #990000">.</span></tt></pre></div></div>
<div class="paragraph"><p>The reason is that the absolute path <code>/opt/criux/bin</code> is not added the the <code>PATH</code> variable. This is done on purpose to avoid mistakes! Therefore, always use the full path <code>/opt/criux/bin/criux</code></p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2015-03-04 11:02:07 CET
</div>
</div>
</body>
</html>
